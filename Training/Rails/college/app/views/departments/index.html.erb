<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Departments</title>
  </head>
  <body>
    <%= render "/header"%>

    <input type="text" name="search_departments" id="search_input" placeholder="Search Department name"/>

  

    <input type="number" name="created_departments" placeholder="HOD ID" id="hod_id_input"/>

    <%=link_to "Search", departments_path, remote: true%><br/>

    <div id="search_results_div"></div>
    
    <h1>Departments</h1>
    <%if $isadmin%>
      <%= link_to 'New Department', new_department_path%>
    <%end%>
    <table>
      <th>ID</th>
      <th>Name</th>
      <th>HOD</th>
      <th>HOD ID</th>
      <th></th>
      <%if $isadmin%>
        <th></th>
        <th></th>
      <%end%>
      <% Department.all.order(:id).each do |d|%>
        <tr>
          <td><%=d.id-%></td>
          <td><%=d.name-%></td>
          <td><%=d.hod.name-%></td>
          <td><%=d.hod_id-%></td>
          <td><%= link_to 'Show', d%></td>
          <%if $isadmin%>
            <td><%=link_to 'Edit' ,edit_department_path(d)%></td>
            <td><%=link_to 'Destroy', department_path(d.id) ,data: {confirm: "Are you sure you want to delete #{d.class} #{d.name}?"}, method: 'delete'%></td>
          <%end%>
        </tr>
      <%end%>

    </table>
    <%= render "/footer"%>
  </body>
</html>
